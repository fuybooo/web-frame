var host="127.0.0.1",port=3003,wsPort=3004;angular.module("templates",[]),angular.module("app",["ui.router","ui.load","ngSanitize","ngAnimate","ngTouch","pascalprecht.translate","templates"]).run(["$state","$stateParams","$rootScope","$anchorScroll",function(t,e,n,o){n.$state=t,n.$stateParams=e,n.$on("$stateChangeSuccess",function(t,e,n,o,i){}),n.$on("$stateChangeStart",function(t,e,n){}),n.$on("$locationChangeStart",function(){}),n.$on("$viewContentLoaded",function(){})}]).factory("httpInterceptor",["$q","$injector",function(t,e){return{request:function(t){return t},response:function(t){return t},requestError:function(t){return t},responseError:function(t){return t}}}]).config(["$httpProvider","$translateProvider",function(t,e){var n=localStorage.getItem("localLanguage")||"cn";e.useStaticFilesLoader({prefix:"app/json/i18n/",suffix:".json"}),e.preferredLanguage(n),t.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8";var o=function(t){var e,n,i,a,r,s,l,c="";for(e in t)if((n=t[e])instanceof Array)for(l=0;l<n.length;++l)r=n[l],i=e+"["+l+"]",s={},s[i]=r,c+=o(s)+"&";else if(n instanceof Object)for(a in n)r=n[a],i=e+"["+a+"]",s={},s[i]=r,c+=o(s)+"&";else void 0!==n&&null!==n&&(c+=encodeURIComponent(e)+"="+encodeURIComponent(n)+"&");return c.length?c.substr(0,c.length-1):c};t.defaults.transformRequest=[function(t){return"[object FormData]"===String(t)?t:angular.isObject(t)&&"[object File]"!==String(t)?o(t):t}]}]).constant("baseRequestUrl","http://"+host+":"+port+"/").constant("webSocketUrl","ws://"+host+":"+wsPort).constant("baseStaticUrl","app/"),angular.element(document).ready(function(){angular.bootstrap(document,["app"])}),angular.module("app").config(["$stateProvider","$urlRouterProvider","$httpProvider","$logProvider",function(t,e,n,o){o.debugEnabled(!1),n.interceptors.push("httpInterceptor"),t.state("home",{abstract:!0,url:"",templateUrl:"app/views/home.html"}).state("home.landing",{url:"",templateUrl:"app/views/landing.html",controller:"LandingController"}),e.otherwise("")}]),angular.module("app").factory("commonService",["$timeout","$compile",function(t,e){var n={};n.counts={customSelect:0},n.REGEXP={username:/^[\u4E00-\u9FA5A-Za-z0-9\-_@\.\|\/]+$/,pictureFile:/\.(?:jpg|png|gif)$/i},n.SESSION={userInfo:"userInfo",localLanguage:"localLanguage"},n.EVENT={login:"login"},n.EVENT_KEY={success:"success",logout:"logout"},n.STATUS={NOT_LOGGED_IN:-1,SUCCESS:0,ERROR:1};var o=null;return n.alert=function(e,n){0===arguments.length&&(e="操作成功！",n=0);var i="success";i="s"===n||void 0===n||0===n?"success":"i"===n||2===n?"info":"w"===n||3===n?"warning":"danger";var a=$(".alert-global-tip");0!==a.length?a.fadeIn(400).text(e).removeClass("alert-success alert-info alert-warning alert-danger").addClass("alert-"+i):a=$('<div class="alert alert-'+i+' alert-global-tip" role="alert">'+e+"</div>").appendTo("body").fadeIn(400),a.css("top",100+$("body").scrollTop()),o&&t.cancel(),o=t(function(){a.fadeOut(400,function(){a.remove()})},1200)},n.transformString=function(t,e){var n="";if(void 0===e){var o=/[A-Z]/,i=/[A-Z]/g,a=/-/,r=/-[a-zA-Z]/,s=/-[a-zA-Z]/g,l=t.search(o),c=t.search(a),p=1;if(-1!==l)-1!==c&&l>c&&(p=2);else{if(-1===c)return t;p=2}var d,u,f,m;if(1===p){for(d=t.split(o),u=t.match(i),f=0,m=d.length;f<m;f++)n+=d[f],f!==m-1&&(n+="-"+u[f].toLowerCase());return n}for(d=t.split(r),u=t.match(s),f=0,m=d.length;f<m;f++)n+=d[f],f!==m-1&&(n+=u[f].slice(1).toUpperCase());return n}return n||t},n.getValidateCode=function(){for(var t=[1,2,3,4,5,6,7,8,9,0],e=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],o=e.map(function(t){return t.toUpperCase()}),i=t.concat(e).concat(o),a=["muted","primary","success","info","warning","danger"],r="",s="",l=0;l<6;l++){var c=i[Math.floor(Math.random()*i.length)];s+=c,r+='<span class="w__1_6 text-center text-'+a[Math.floor(Math.random()*a.length)]+'">'+c+"</span>"}return n.validateCode=s,'<span class="validate-code" title="换一张" ng-click="refreshValidateCode($event)">'+r+"</span>"},n.showQuickEdit=function(t){var n=function(){$(".js-edit-panel").remove()},o=$('<div class="js-edit-panel edit-panel"><div class="edit-panel-title bg-info">'+(t.title||"修改")+'<span class="js-edit-panel-close edit-panel-close">&#215;</span></div><div class="edit-panel-body"><form name="'+t.field+'_form"><input type="text" class="form-control" ng-model="'+t.field+'" name="'+t.field+'" ng-init="'+t.field+"='"+t.value+'\'"></form></div><div class="edit-panel-footer"><button class="btn btn-primary btn-sm js-sure-edit" ng-disabled="'+t.field+"_form.$pristine || "+t.field+'_form.$invalid">确定</button></div></div>'),i=t.target;i.append(e(o)(t.scope)),$(".js-edit-panel-close").off("click.close").on("click.close",function(t){t.stopPropagation(),n(),i.parent().removeClass("show")}),$(document).off("click.close.editPanel").on("click.close.editPanel",function(t){$(".js-edit-panel").length>0&&!$.contains($(".js-edit-panel")[0],t.target)&&(n(),i.parent()[0]===t.target||i.parent()[0]!==t.target&&$.contains(i.parent()[0],t.target)||i.parent().removeClass("show"))}),$(".js-sure-edit").off("click.sure.edit").on("click.sure.edit",t.ok)},n.findParentNode=function(t,e){var o=t.parentNode;return o?o.nodeName.toLowerCase()===e.toLowerCase()?o:n.findParentNode(o,e):null},n.isArray=function(t){if(-1!==Object.prototype.toString.apply(t).indexOf("Array"))return!0},n.isObject=function(t){if(-1!==Object.prototype.toString.apply(t).indexOf("Object"))return!0},n.deepClone=function(t){if(!n.isArray(t)&&!n.isObject(t))return t;var e=arguments[1];e=e||(n.isArray(t)?[]:{});for(var o in t)Object.hasOwnProperty(o)||("object"==typeof t[o]?(e[o]=n.isArray(t)?[]:{},n.deepClone(t[o],e[o])):e[o]=t[o]);return e},n.ADU={add:function(t,e){Array.prototype.splice.apply(t,[0,0].concat(e))},del:function(t,e){e=[].concat(e);for(var n=0,o=t.length;n<o;n++){var i=t[n];if(i)for(var a=0,r=e.length;a<r;a++)if(i.id===e[a]){t.splice(n,1);break}}},update:function(t,e){e=[].concat(e);for(var n=0,o=t.length;n<o;n++){var i=t[n];if(i)for(var a=0,r=e.length;a<r;a++){var s=e[a];if(i.id===s.id){t.splice(n,1);break}}}Array.prototype.splice.apply(t,[0,0].concat(e))}},n.sort=function(t,e){var n=arguments[2],o=arguments[3];t.sort(function(t,i){var a=t[e],r=i[e];return o?n?a-0<r-0:a-0>r-0:n?a+""<r+"":a+"">r+""})},n.dateTimeFormatter=function(){var t=new Date,e="yyyy-MM-dd",n=arguments.length;1===n&&("object"==typeof arguments[0]&&(t=arguments[0]),"string"==typeof arguments[0]&&(e=arguments[0])),2===n&&("object"==typeof arguments[0]&&"string"==typeof arguments[1]?(t=arguments[0],e=arguments[1]):"object"==typeof arguments[1]&&"string"==typeof arguments[0]&&(t=arguments[1],e=arguments[0]));var o,i=t.getFullYear(),a=t.getMonth()+1,r=t.getDate();t.getHours(),t.getMinutes(),t.getSeconds();switch(e){case"yyyy-MM-dd":o=i+"-"+("0"+a).slice(-2)+"-"+("0"+r).slice(-2)}return o},n.once=function(){var t={};return function(e){if(!0!==arguments[1])for(var n in t)if(!Object.hasOwnProperty(n)&&(t[n].fn===e||t[n].fn.toString()===e.toString()))return t[n].result;var o=e();return t[0]={fn:e,result:o},o}}(),n.getIndexes=function(t,e){t=t.toLowerCase(),e=e.toLowerCase();var n,o,i=t,a=[];for(n=0,o=e.length;n<o;n++){var r=function(t,e){var n=t.indexOf(e);return{index:n,strBehind:t.slice(n+1)}}(i,e[n]);i=r.strBehind,a.push(r)}var s=[];for(n=0,o=a.length;n<o;n++){for(var l=0,c=0;c<=n;c++)l+=a[c].index;l+=n,s.push(l)}return s},n.splitString=function(t,e){t+="";var o="",i=[];e&&(i=n.getIndexes(t,e));for(var a=0,r=t.length;a<r;a++){var s="";0!==i.length&&a===i[0]&&(s="text-match",i.shift()),o+='<span class="'+s+'">'+t.charAt(a)+"</span>"}return o},n}]),angular.module("app").factory("dataService",["$http","$injector","baseRequestUrl","baseStaticUrl","webSocketUrl",function(t,e,n,o,i){var a={},r=function(){var t,n,o,i,r,s=arguments[0];angular.forEach(arguments[1],function(e){"string"==typeof e?t=e:"object"==typeof e?n=e:"function"==typeof e&&(o?i=e:o=e)}),r=a.getPromise(s,t,n);var l=e.get("commonService");r.success(function(t){"GET"!==s&&t.msg&&l.alert(t.msg,t.code),o&&o(t)}).error(function(t){l.alert(t.msg||"发生严重错误！",t.code),i&&i(t)})};return a.get=function(){r("GET",arguments)},a.post=function(){r("POST",arguments)},a.getPromise=function(e,i,a){1===arguments.length&&(e="GET",i=arguments[0]);var r=i.slice(-5);i=".html"===r?o+"views/":".json"===r?o+"json/":n+i;var s={url:i,withCredentials:!0};return"GET"===e?(s.method="GET",a&&(s.params=a)):(s.method="POST",a&&(s.data=a)),t(s)},a.URL={},a}]),angular.module("app").directive("formGenerator",["commonService",function(t){return{template:function(e,n){var o,i="",a=n.url.slice(-4);if($.ajax({url:"app/"+("json"===a?"json":"views")+"/"+n.url,dataType:a,async:!1,success:function(t){i=t}}),"html"===a)return i;var r=i.form.name,s=i.form.labelCol,l=i.form.rightCol,c=i.form.btnOffsetCol,p=i.form.colType,d=[],u=function(t){return'<div class="col-'+p+"-offset-"+c+" col-"+p+"-"+t.btnCol+'"><button class="btn btn-primary btn-block" ng-click="'+t.click+'" ng-disabled="'+r+".$invalid || "+r+'.$pristine">'+t.value+"</button></div>"};return angular.forEach(i.form.content,function(e){var n=" ",i=[],a=[],f=[],m="";switch(e.type){case"text":case"password":case"textarea":if(e.limitRules){angular.forEach(e.limitRules,function(o){f.push(r+"."+e.name+".$error."+o.name),0===o.type?""===o.value?n+=o.name+" ":n+="ng-"+o.name+'="'+o.value+'" ':""===o.value?n+=t.transformString(o.name)+" ":n+=t.transformString(o.name)+'="'+o.value+'" ',i.push('<span ng-show="%%ngShow%%">'+e.label+o.tip+"</span>")});var h="";for(o=0;o<f.length;o++)h+="!"+f[o],o<f.length-1&&(h+=" && ");for(o=0;o<f.length;o++){for(var v=h,g=o+1;g<f.length;g++)v=v.replace(" && !"+f[g],"");a[o]=v.replace("!"+f[o],f[o])}for(o=0;o<i.length;o++)i[o]=i[o].replace("%%ngShow%%",a[o])}var $='<input type="'+e.type+'" ',b='">';"textarea"===e.type&&($="<textarea",b="></textarea>"),m='<div class="form-group"><label '+(e.id?'for="'+e.id+'"':"")+' class="col-'+p+"-"+s+' control-label">'+(e.required?'<span class="c-red">*</span>':"")+e.label+'</label><div class="col-'+p+"-"+l+'">'+$+'name="'+e.name+'" ng-model="'+e.model+'" placeholder="'+e.placeholder+e.label+'"class="form-control" '+(e.id?'id="'+e.id+'"':"")+n+b+'<span class="text-danger" ng-show="'+r+"."+e.name+".$dirty && "+r+"."+e.name+'.$invalid">'+i.join("")+"</span></div></div>",d[e.sort]=m;break;case"checkbox":case"radio":var y="";for(o=0;o<e.checkItems.length;o++){var w=e.checkItems[o];y+='<div class="'+e.type+'"><input type="'+e.type+'" ng-model="'+w.model+'" '+(w.required?"required":"")+" >"+w.label+"</div>"}m='<div class="form-group"><div class="col-'+p+"-offset-"+s+" col-"+p+"-"+l+'">'+y+"</div></div>",d[e.sort]=m;break;case"button":var k=u(e.btns[0]);2===e.btns.length&&(k+=u(e.btns[1])),m='<div class="form-group">'+k+"</div>",d[e.sort]=m;break;default:m="<div "+t.transformString(e.type)+' data-formName="'+r+'" data-labelCol="'+s+'" data-rightCol="'+l+'" data-btnOffsetCol="'+c+'" data-colType="'+p+'" data-sort="'+e.sort+'" data-name="'+e.name+'" data-model="'+e.model+'" ></div>',d[e.sort]=m}}),'<form class="form-horizontal" role="form" name="'+r+'" novalidate>'+d.join("")+"</form>"}}}]).directive("validateGenerator",["commonService",function(t){return{replace:!0,template:function(e,n){var o=n.validateGenerator?$("#"+n.validateGenerator):$(e).prev(),i=[],a=o.attr("type");"email"===a?i.push({name:"email",desc:"邮箱格式不正确"}):"number"===a?i.push({name:"number",desc:"数字格式不正确"}):"url"===a&&i.push({name:"url",desc:"url格式不正确"});for(var r=[{name:"required",desc:"必填项不能为空"},{name:"ng-minlength",desc:"最少字符限制"},{name:"ng-maxlength",desc:"最大字符限制"},{name:"ng-pattern",desc:"输入不符合规范"}],s=0,l=r.length;s<l;s++){var c=r[s];if(c.name in o[0].attributes){var p="";"ng-minlength"!==c.name&&"ng-maxlength"!==c.name||(p=o.attr(c.name)+"位"),i.push({name:c.name.replace("ng-",""),desc:c.desc+p})}}i=i.concat(n.customValidate?n.customValidate.split(",").map(function(t){return{name:t.split(":")[0].trim(),desc:t.split(":")[1].trim()}}).filter(function(t){return t.name in o[0].attributes}).map(function(e){return{name:t.transformString(e.name),desc:e.desc}}):[]);var d=n.form||$(t.findParentNode(e[0],"form")).attr("name");if(!d)throw new Error("Cannot find form!");var u=[],f=[],m=[];angular.forEach(i,function(t){u.push(d+"."+o[0].name+".$error."+t.name),m.push('<span ng-show="%%ngShow%%">'+t.desc+"</span>")});var h="";for(s=0;s<u.length;s++)h+="!"+u[s],s<u.length-1&&(h+=" && ");for(s=0;s<u.length;s++){for(var v=h,g=s+1;g<u.length;g++)v=v.replace(" && !"+u[g],"");f[s]=v.replace("!"+u[s],u[s])}for(s=0;s<m.length;s++)m[s]=m[s].replace("%%ngShow%%",f[s]);return'<span ng-show="!'+d+"."+o[0].name+".$pristine &&!"+d+"."+o[0].name+'.$valid" class="text-danger">'+m.join("")+"</span>"}}}]).directive("validateCodeControl",function(){return{replace:!0,template:function(t,e){return'<div class="form-group"><label '+(e.id?'for="'+e.id+'"':"")+' class="col-'+e.coltype+"-"+e.labelcol+' control-label"><span class="c-red">*</span>验证码</label><div class="col-'+e.coltype+"-"+e.rightcol+'"><input type="text" name="'+e.name+'" ng-model="'+e.model+'" placeholder="请输入验证码" class="form-control w_50 fl" '+(e.id?'id="'+e.id+'"':"")+'required><validate-code></validate-code><span class="form-error-tip text-danger" ng-show="'+e.formname+"."+e.name+".$dirty && "+e.formname+"."+e.name+'.$invalid">验证码不能为空</span></div></div>'}}}).directive("validateCode",["$compile","commonService",function(t,e){return{restrict:"EA",replace:!0,template:e.getValidateCode,link:function(e,n){$(n).click(function(){$(this).replaceWith(t("<validate-code></validate-code>")(e))})}}}]).directive("commentsModule",function(){return{templateUrl:"app/views/comments-module.html",link:function(t,e){}}}).directive("commentsModulePost",function(){return{templateUrl:"app/views/comments-module-post.html",link:function(t,e){}}}).directive("gradientText",function(){return{link:function(t,e,n){var o=n.level-0||2,i=function(){return"rgb("+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+")"};$(e).css("background-image",function(){if(o<=2)return"-webkit-gradient(linear, left top, right bottom, from("+i()+"), to("+i()+"))";for(var t="-webkit-linear-gradient(left, ",e=0;e<o;e++)t+=i()+" "+e+(0===e?"":"0%"),t+=e<o-1?",":")";return t}())}}}).directive("gradientTextNormal",function(){return{link:function(t,e){for(var n=$(e).text(),o=n.length,i=function(t){return t%256},a=function(){return Math.floor(256*Math.random())},r=[],s=0;s<o;s++)r.push({r:a(),g:a(),b:a()});!function(){for(var t="",a=0;a<o;a++){var s=n[a],l=r[a];t+='<span style="color: rgb('+i(l.r)+","+i(l.g)+","+i(l.b)+')">'+s+"</span>"}$(e).html(t)}()}}}).directive("sensitiveWord",["$timeout","dataService",function(t,e){return{require:"ngModel",link:function(n,o,i,a){var r=null;n.$watch(i.ngModel,function(n){n&&(r&&t.cancel(),r=t(function(){e.validateSensitiveWord(a.$modelValue,function(t){a.$setValidity("sensitiveWord",0===t.code)})},300))})}}}]).directive("disabledAfterClick",["$timeout",function(t){return{link:function(e,n){$(n).off("click.dac").on("click.dac",function(){$(n).prop("disabled",!0),t(function(){$(n).prop("disabled",!1)},2e3)})}}}]).directive("compileBindHtml",["$compile",function(t){return{link:function(e,n,o){e.$watch("::"+o.compileBindHtml,function(o){if(o&&-1!==o.indexOf("<")&&-1!==o.indexOf(">")){t(o)(e,function(t){n.empty(),n.append(t)})}else n.empty(),n.append(o)})}}}]).directive("repeatFinish",["$timeout",function(t){return{link:function(e,n,o){e.$last&&t(function(){e.$emit(o.repeatFinish)})}}}]).directive("customSelect",["$timeout","$compile","commonService",function(t,e,n){return{restrict:"AE",replace:!0,templateUrl:"app/views/common/custom-select.html",link:function(o,i,a){function r(){var t=f.is(":visible");return $(".custom-select-list").addClass("dn"),$(".custom-select-main").removeClass("input-focus"),t&&!m||f.removeClass("dn"),!1}function s(){$(this).addClass("active").siblings().removeClass("active")}function l(){var t=$(this).attr("data-key"),e=$(this).attr("data-value");u.attr("data-key",t).attr("data-value",e),""===t?u.val(""):u.val(e),f.addClass("dn")}function c(t){t&&3===t.which||i[0].contains(t.target)||f.is(":visible")&&f.addClass("dn")}function p(t){var e=t.which,n=f.find(".active");if(13===e&&n.click(),27===e&&f.addClass("dn"),37===e||38===e||39===e||40===e){f.removeClass("dn"),0===n.length&&(f.find("li:first").addClass("active"),n=f.find(".active")),37!==e&&38!==e||0!==n.index()&&n.prev().addClass("active").siblings().removeClass("active"),39!==e&&40!==e||n.index()!==k.length-1&&n.next().addClass("active").siblings().removeClass("active");var o=f.height(),i=f.find("li:first").height(),a=Math.floor(o/i);n=f.find(".active");var r=n.index()+1,s=r-a;s>=0&&f.scrollTop(s*i)}}function d(e){var n=e.which;if(!(13===n||27===n||n>=37&&n<=40)){var o=u.val();o!==S&&(S=o,C&&t.cancel(),C=t(function(){y(w(o),o)},200),f.removeClass("dn"))}}var u=$(i).find("input.custom-select-main"),f=$(i).find(".custom-select-list"),m="search"in a;m&&(u=u.prop("readonly",!1));var h=a.model,v=a.csNgModel,g=a.placeholder;u.attr("placeholder",g);var b=u.clone().attr("ng-model",v);u.remove(),u=b,$(i).prepend(e(u)(o));var y=function(t){var e="";if(0===t.length)e='<li class="custom-select-item custom-select-no-click">没有匹配记录</li>';else for(var o=arguments[1],i=0,a=t.length;i<a;i++){var r=t[i];e+='<li class="custom-select-item'+(0===i?" active":"")+'" data-key="'+r.key+'" data-value="'+r.value+'">'+n.splitString(r.value,o)+"</li>"}return f.empty().append(e),!1},w=function(t){var e=[];if(""!==t){for(var n="",o=0,i=t.length;o<i;o++)n+=t.charAt(o)+"[\\s\\S]*?";for(var a=new RegExp(n,"i"),r=0,s=k.length;r<s;r++){var l=k[r];a.test(l.value)&&e.push(k[r])}}else e=k;return e},k=o[h];if(!(k&&k.length>0&&void 0!==k[0].key&&void 0!==k[0].value))return void console.error("请使用data-model绑定下拉框的数据，且数据中必须包含key和value两个属性！");y(k);var x=++n.counts.customSelect;$(i).on("click.cs",".custom-select-main",r).on("click.cs",".custom-select-item:not(.custom-select-no-click)",l).on("mouseenter.cs",".custom-select-item",s),u.on("keydown.cs",p),u.on("keyup.cs",d),$(document).off("click.customselect"+x).on("click.customselect"+x,c);var C=null,S=""}}}]),angular.module("app").filter("languageFilter",["data",function(t){}]),angular.module("app").directive("btUser",["commonService","dataService",function(t,e){return{link:function(t,n,o){var i=$(n);i.bootstrapTable({striped:!0,height:400,classes:"table table-hover table-layout-fixed",columns:[{checkbox:!0},{title:"序号",align:"center",sortable:!0,formatter:function(t,e,n){return n+1}},{field:"userId",title:"用户ID",align:"center"},{field:"userName",title:"用户名",align:"center"}]});var a=1,r=[],s=!0,l=0,c=function(){s=!1,e.get(e.url.user,{action:"manyUsers",pageNumber:a,pageSize:40},function(t){Array.prototype.push.apply(r,t.rows),i.bootstrapTable("load",r),p.scrollTop(l),s=!0})};c();var p=i.parent(),d=p.height();p.off("scroll.user").on("scroll.user",function(){var t=p.scrollTop();i.height()-d-t-50<=0&&(console.log("isTrigger:",s),s&&(l=t,a++,c()))})}}}]),angular.module("app").factory("Popupwin",["$http","$compile",function(t,e){var n={cls:"",isMask:!0,isKeyboard:!0,zIndex:200,animation:"random",animationTime:400,okBtnText:"确定",okBtnCls:"btn-primary btn-sm",closeBtnText:"取消",closeBtnCls:"btn-primary btn-sm",btnPosition:"right",isFooter:!0,isOkOnly:!0,isCancelOnly:!1,title:"温馨提示",text:"操作成功!",textCls:"text-primary",defaultText:"您确定删除吗？",top:100,width:300,html:'<p class="text-center"></p>',closeWinAfterOk:!0,closeWinAfterClose:!0},o=n.zIndex,i=function(){var t=$(".popupwin:visible"),e=t.length;if(0!==e){for(var n=$(t[0]),o=1;o<e;o++)$(t[o]).css("z-index")-0>n.css("z-index")-0&&(n=$(t[o]));return n}},a=function(t){"object"==typeof t?this.options=t:"function"==typeof t?this.options={text:n.defaultText,ok:t}:"string"==typeof t?(this.options={text:t},arguments[1]&&(this.options.ok=arguments[1])):void 0===t&&(this.options={}),this.init()};return a._count=0,a.create=function(){return a._count++,new a(arguments[0],arguments[1])},a.close=function(){var t=i();t&&(t.prev().fadeOut(function(){$(this).remove()}),t.fadeOut(function(){$(this).remove()}))},a.currentIndex=function(){var t=i();return t?(t.css("z-index")-o-1)/10:0},a.prototype.init=function(){this.options=$.extend({},n,this.options),o=this.options.zIndex,this.options.htmlUrl||this.options.html!==n.html||(this.options.html=this.options.html.replace("><",">"+this.options.text+"<").replace('">'," "+this.options.textCls+'">')),$('button, [type="button"], [type="submit"], [type="reset"]').blur(),this.initContainer(),this.initPopupwin()},a.prototype.initContainer=function(){var t=this.options.cls;if(""===t)t="popup-win-"+a._count;else for(var e=$(".popupwin"),n=0,o=e.length;n<o;n++)if($(e[n]).hasClass("pw-"+t)){t=t+"-"+a._count;break}var i=['<div class="popupwin-bg pw-bg-'+t+'"></div>','<div class="popupwin pw-'+t+'">','<div class="pw-header">','<span class="pw-title">'+this.options.title+"</span>",'<span class="pw-close pw-js-close">&#215;</span>',"</div>",'<div class="pw-body"></div>'];this.options.isFooter&&(i=i.concat(['<div class="pw-footer text-'+this.options.btnPosition+'">','<button type="button" class="btn '+this.options.closeBtnCls+' pw-btn-close pw-js-close">'+this.options.closeBtnText+"</button>",'<button type="button" class="btn '+this.options.okBtnCls+' pw-btn-ok">'+this.options.okBtnText+"</button>","</div>"])),i=i.concat(["</div>"]),this.$pop=$(i.join("")),this.$bg=$(this.$pop[0]),this.$container=$(this.$pop[1]),this.$title=this.$container.find(".pw-title"),this.$close=this.$container.find(".pw-js-close"),this.$body=this.$container.find(".pw-body"),this.$okBtn=this.$container.find(".pw-btn-ok"),this.$closeBtn=this.$container.find(".pw-btn-close"),this.options.isOkOnly?this.$closeBtn.hide():this.options.isCancelOnly&&this.$okBtn.hide()},a.prototype.initEvent=function(){this.$close.off("click.pw").on("click.pw",$.proxy(this.closeEvent,this)),this.$okBtn.off("click.pw").on("click.pw",$.proxy(this.okEvent,this)),this.options.isKeyboard&&$("body").off("keydown.pw").on("keydown.pw",function(t){var e=i();if(e){27===(t.which||t.keyCode)&&e.find(".pw-js-close").click()}})},a.prototype.closeEvent=function(){this.options.close?(this.options.close(),this.options.closeWinAfterClose&&this.animate("close")):this.animate("close")},a.prototype.okEvent=function(){this.options.ok?(this.options.ok(),this.options.closeWinAfterOk&&this.animate("close")):this.$close.click()},a.prototype.initPopupwin=function(){var e=this;this.options.htmlUrl?t({method:"GET",url:e.options.htmlUrl}).success(function(t){e.options.scope&&e.bindBtn(t),e.initEvent(),e.$body.empty().append(t),e.appendToBody(),e.show()}):(e.options.scope&&e.bindBtn(e.options.html),e.initEvent(),e.$body.empty().append(e.options.html),e.appendToBody(),e.show()),this.$okBtn.text(this.options.okBtnText),this.$closeBtn.text(this.options.closeBtnText);var n=$(".popupwin:visible").length,o=this.options.zIndex+10*n,i=this.options.zIndex+10*n+1;this.$bg.css("z-index",o),this.$container.css("z-index",i)},a.prototype.show=function(){this.animate("show")},a.prototype.close=function(){this.animate("close")},a.prototype.animate=function(t){var e=this.options.animation,n=this.options.animationTime,o=this;if("close"===t){if("fade"===e)this.$bg.fadeOut(600),this.$container.fadeOut(600);else if(this.$bg.hide(),"none"===e)this.$container.hide();else{var i={top:0,right:1,bottom:2,left:3},a=[{top:-1e3},{left:1800},{top:1e3},{left:-1800},{opacity:0},{width:0}];"random"===e?this.$container.animate(a[Math.floor(6*Math.random())],n,function(){o.$container.hide()}):this.$container.animate(a[i[e]],n,function(){o.$container.hide()})}$("body").off("keydown.pw"),setTimeout(function(){o.$pop.remove()},700)}else this.$container.css("min-width",o.options.width),this.$container.css("top",$("body").scrollTop()+o.options.top),this.$container.fadeIn(n),this.$bg.fadeIn(n)},a.prototype.bindBtn=function(t){var e=$(t);if(e.length){var n="FORM"===e[0].nodeName?e:e.find("form");if(0!==n.length&&0===n.find("button").length){var o=n.attr("name");this.$okBtn.attr("ng-disabled",o+".$invalid || "+o+".$pristine")}}},a.prototype.appendToBody=function(){this.options.scope?$("body").append(e(this.$pop)(this.options.scope)):$("body").append(this.$pop)},a}]),angular.module("app").controller("LandingController",["$scope","commonService",function(t,e){"use strict";console.log(t,e)}]);