"use strict";angular.module("mgcrea.bootstrap.affix",["mgcrea.jquery"]).directive("bsAffix",["$window","dimensions",function($window,dimensions){var checkPosition=function(i,n,o){var t,e=window.pageYOffset,f=document.body.scrollHeight,s=dimensions.offset.call(n[0]),c=dimensions.height.call(n[0]),a=1*o.offsetTop,l=1*o.offsetBottom,r="affix affix-top affix-bottom";t=!(null!==i.unpin&&e+i.unpin<=s.top)&&(l&&s.top+c>=f-l?"bottom":!!(a&&e<=a)&&"top"),i.affixed!==t&&(i.affixed=t,i.unpin="bottom"===t?s.top-e:null,n.removeClass(r).addClass("affix"+(t?"-"+t:"")))},checkCallbacks=function(scope,instance,iElement,iAttrs){instance.affixed?iAttrs.onUnaffix&&eval("scope."+iAttrs.onUnaffix):iAttrs.onAffix&&eval("scope."+iAttrs.onAffix)};return{restrict:"EAC",link:function(i,n,o){var t={unpin:null};angular.element($window).bind("scroll",function(){checkPosition(t,n,o),checkCallbacks(i,t,n,o)}),angular.element($window).bind("click",function(){setTimeout(function(){checkPosition(t,n,o),checkCallbacks(i,t,n,o)},1)})}}}]);